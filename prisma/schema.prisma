generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Booking {
  id           BigInt   @id @default(autoincrement())
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  startDate    DateTime
  endDate      DateTime
  numNights    Int
  numGuests    Int
  roomPrice    Float
  extrasPrice  Float?
  totalPrice   Float
  status       String?
  hasBreakfast Boolean  @default(false)
  isPaid       Boolean  @default(false)
  observations String?

  roomId BigInt
  room   Room   @relation(fields: [roomId], references: [id])

  userId String? @db.Uuid
  user   User?   @relation(fields: [userId], references: [id])

  @@map("bookings")
}

model Room {
  id           BigInt   @id @default(autoincrement())
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  maxCapacity  Int
  regularPrice Float
  discount     Float?
  image        String?
  type         String?  @default("")

  bookings Booking[]

  @@map("rooms")
}

model Setting {
  id                  BigInt   @id @default(autoincrement())
  createdAt           DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  minBookingLength    Int
  maxBookingLength    Int
  maxGuestsPerBooking Int
  breakfastPrice      Float

  @@map("settings")
}

model User {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name          String?
  email         String    @unique
  image         String?
  nationalID    String?
  nationality   String?
  countryFlag   String?
  emailVerified DateTime?
  isAdmin       Boolean   @default(false)

  bookings Booking[]

  @@map("users")
}

